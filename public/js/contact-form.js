var l=document.documentElement,v=l.querySelector(".hamburger"),f=l.querySelector(".nav-overlay");window.addEventListener("resize",H);document.addEventListener("keydown",T);v.addEventListener("click",M);var g=l.getElementsByClassName("nav-link"),L=Array.from(g),b=window.location.pathname;L.forEach(t=>{let e=new URL(t.href).pathname;b===e&&t.classList.add("current-page")});function M(){y()?O():E()}function y(){return f.classList.contains("hidden")}function E(){l.classList.remove("overlay-nav-open"),v.classList.remove("open"),f.classList.add("hidden")}function T(t){y()===!1&&t.key==="Escape"&&E()}function H(){y()===!1&&window.innerWidth>768&&E()}function O(){l.classList.add("overlay-nav-open"),v.classList.add("open"),f.classList.remove("hidden")}function I(){let t=document.querySelector(".scroll-to-top"),e=document.querySelector(".hero"),r=document.querySelector(".navbar");if(!t||!e||!r)return;let n=r.offsetHeight;t.addEventListener("click",s=>{s.preventDefault(),scrollTo({top:0,behavior:"smooth"})});let i={root:null,rootMargin:`-${n}px`,threshold:0},o=s=>{s.forEach(a=>{a.isIntersecting?t.classList.add("hidden"):t.classList.remove("hidden")})};new IntersectionObserver(o,i).observe(e)}I();var m=document.getElementById("contact-form"),h=m.querySelectorAll("label+[name]");m.addEventListener("submit",k);m.addEventListener("blur",S,!0);function S(t){let e=t.target,r=e.id,n=e.validity,i=m.querySelector("button"),o={name:{name:"name",errorMessage:"Please enter your legal name"},email:{name:"email",errorMessage:"Invalid email format. Use this format: example@domain.com"},phone:{name:"phone",errorMessage:"Invalid phone format. Only Digits. No area code. Use this format: 1231231234"},inquiry:{name:"inquiry",errorMessage:"Please enter a message"}};if(e!==i){let c=o[r].errorMessage;e.checkValidity(),n.tooShort||n.tooLong||n.patternMismatch||n.valueMissing?e.setCustomValidity(c):(e.classList.remove("form-error"),e.setCustomValidity(""))}}async function k(t){t.preventDefault();let e=h.values(),r=F(e,{}),n=document.querySelector(".form-errors"),i=document.querySelector(".success-message");try{let o=await q(r),{errors:c}=o;if(c){n.style.display="block",n.hasChildNodes()&&Array.from(n.childNodes).forEach(a=>a.remove()),h.forEach(s=>s.classList.remove("form-error"));for(let s of Object.values(c)){let{name:a,errorMessage:p}=s,u=document.createElement("p");if(u.id=`${a}-error`,u.innerText=p,n.insertAdjacentElement("afterbegin",u),a==="unexpected-key-values")h.forEach(d=>d.classList.add("form-error"));else{let d=document.getElementById(a);d&&d.classList.add("form-error")}}}else n.style.display="none",m.style.display="none",i.style.display="block",i.firstElementChild?.insertAdjacentText("beforeend",`, ${o.message}!`)}catch(o){o instanceof Error&&console.error(o.name,o.message)}}async function q(t){let e="http://localhost:3000/contact/form-submit",r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return(await fetch(e,r)).json()}function F(t,e){for(let r of t)e[r.name]=r.value.trim();return e}
